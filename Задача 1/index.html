<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script
            src="https://code.jquery.com/jquery-3.7.0.js"
            integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM="
            crossorigin="anonymous"></script>
    <title>Задача 1</title>
</head>
<body style="display: flex; flex-direction: column;align-items: center">
<h2>Задайте размер квадратной матрицы</h2>

<div style="display: flex; flex-direction: column; align-items: center; margin-top: 20px">
    <input id="number" type="number" min="1" step="2" name="size" value="7"><br>
    <button id="btn" style="margin-top:20px; width: 90px">Отправить</button>
</div>

<div style=
        "margin-top: 100px;
        width: 100%;
        height: 100%;
        display: flex;
        /*flex-direction: column;*/
        justify-content: center;
        align-items: center;">
    <div class="answer"  style= "min-width: 500px; min-height: 500px;text-align: center;"> </div>
</div>

<script>
    $("#btn").click(function(){
        $('.answer').text( '' );
        // var number = $('#number').val();
        // var square = magicSquare(number);
        let number = parseInt($('#number').val(), 10);
        square = magicSquare( number );

        for (var i = 0; i < number; i++) {
            for (var j = 0; j < number; j++){

                $('.answer').append($('<a>', {
                    'text':  square[i][j],
                    'class': 'row'
                }));
            }
            $('.answer').append($('<br>'));
        }

    });
    function magicSquare(n) {
        let square = [];
        let x = 0;
        let y = (n - 1) / 2;
        for (let i = 0; i < n; i++) {
            square[i] = [];
            for (let j = 0; j < n; j++) {
                square[i][j] = 0;
            }
        }
        for (let i = 0; i < n * n; i++) {
            pos(i + 1);
        }
        function pos(value) {
            square[x][y] = value;
            let tx = x;
            let ty = y;
            x--;
            if (x < 0) {
                x += n;
            }
            y--;
            if (y < 0) {
                y += n;
            }
            if (square[x][y] !== 0) {
                x = tx + 1;
                if (x === n) {
                    x = 0;
                }
                y = ty;
            }
        }
        return square;
    }


</script>
<style>
    .row{
        min-width: 25px;
        text-align: center;
        padding: 4px;
        display: inline-block;
    }
</style>
</body>
</html>